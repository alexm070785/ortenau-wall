<!doctype html>
<html lang="de">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>Admin – Seite erstellen (statisch)</title>
<style>
  body{font-family:system-ui,Segoe UI,Roboto,Arial,sans-serif;margin:0;background:#f6f6f6;color:#333}
  .wrap{max-width:860px;margin:32px auto;padding:0 16px}
  h1{margin:0 0 16px}
  form{background:#fff;padding:16px;border-radius:12px;box-shadow:0 4px 12px rgba(0,0,0,.08);display:grid;gap:12px}
  label{font-weight:600}
  input,textarea{width:100%;padding:10px 12px;border:1px solid #d0d0d0;border-radius:10px;background:#fff}
  textarea{min-height:220px;font-family:ui-monospace, SFMono-Regular, Menlo, Consolas, "Liberation Mono", monospace}
  .row{display:grid;gap:12px;grid-template-columns:1fr 1fr}
  button{padding:10px 14px;border:0;border-radius:10px;background:#222;color:#fff;cursor:pointer}
  .muted{color:#70798C;font-size:.95rem}
  .out{white-space:pre-wrap;background:#fff;padding:12px;border-radius:10px;border:1px dashed #ddd}
</style>
</head>
<body>
<div class="wrap">
  <h1>Neue Seite erstellen</h1>
  <form id="f">
    <div class="row">
      <div>
        <label for="title">Titel</label>
        <input id="title" placeholder="z. B. Bella Pizza – Speisekarte">
      </div>
      <div>
        <label for="filename">Dateiname</label>
        <input id="filename" placeholder="bella-pizza.html">
      </div>
    </div>
    <label for="content">Inhalt (HTML oder einfacher Text)</label>
    <textarea id="content" placeholder="<h2>Unsere Speisen</h2>…"></textarea>
    <div class="muted">
      Hinweis: Die Seite wird als vollständige HTML-Datei mit deinem Design erzeugt. Lade sie danach auf deinen Server und verlinke sie z. B. auf der Startseite.
    </div>
    <button type="button" id="dl">Seite als .html herunterladen</button>
  </form>

  <h3 style="margin:24px 0 8px">Link-Snippet für die Startseite</h3>
  <div class="out" id="snippet"></div>
</div>

<script>
const BASE_SHELL = (title, inner) => `<!doctype html>
<html lang="de">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>${title}</title>
<style>
  :root{--accent:#e7e7e7;--text:#4f4f4f;--bg:#f6f6f6;--card:#fff;--muted:#70798C;--radius:12px;--shadow:0 4px 12px rgba(0,0,0,.08);--shadowHover:0 6px 18px rgba(0,0,0,.12)}
  *{box-sizing:border-box}body{margin:0;font-family:system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,Cantarell,Noto Sans,sans-serif;background:var(--bg);color:var(--text);padding-bottom:40px}
  header.site{position:sticky;top:0;z-index:10;background:var(--accent);border-bottom:1px solid #b0b0b0}
  .head{max-width:1360px;margin:0 auto;display:flex;align-items:center;justify-content:space-between;padding:10px 16px}
  .page{max-width:960px;margin:20px auto;padding:0 16px}
  .card{background:var(--card);border-radius:var(--radius);box-shadow:var(--shadow);padding:16px}
  .muted{color:var(--muted)}
  footer{position:fixed;bottom:0;left:0;width:100%;height:40px;background:var(--accent);color:#595959;border-top:1px solid #b0b0b0;font-size:.9rem}
  .footer-inner{max-width:1360px;margin:0 auto;height:100%;display:flex;justify-content:center;align-items:center;padding:0 12px}
</style>
</head>
<body>
<header class="site">
  <div class="head">
    <a href="index.html" aria-label="Zur Startseite"><img src="header.png" alt="Logo" height="48"></a>
    <h1 style="font-size:1.1rem;margin:0">${title}</h1>
  </div>
</header>
<main class="page">
  <article class="card">
    ${inner}
  </article>
</main>
<footer><div class="footer-inner">© Ortenau liefert</div></footer>
</body>
</html>`;

function sanitizeFileName(name){
  return (name||'seite').toLowerCase().replace(/[^a-z0-9-]+/g,'-').replace(/^-+|-+$/g,'') + '.html';
}

document.getElementById('dl').addEventListener('click', ()=>{
  const title = document.getElementById('title').value.trim()||'Neue Seite';
  let fn = document.getElementById('filename').value.trim();
  if(!fn) fn = sanitizeFileName(title);
  if(!fn.endsWith('.html')) fn += '.html';

  const raw = document.getElementById('content').value.trim();
  const inner = raw ? raw : '<p class="muted">Hier steht bald Inhalt…</p>';

  const file = new Blob([BASE_SHELL(title, inner)], {type:'text/html;charset=utf-8'});
  const a = document.createElement('a');
  a.href = URL.createObjectURL(file);
  a.download = fn;
  a.click();
  URL.revokeObjectURL(a.href);

  const snippet = `<a class="card" href="${fn}" style="--cat-color:#FDF1DF">
  <div class="icon-wrap"><img class="icon" src="icons/restaurant.png" alt="" width="96" height="96" loading="lazy" decoding="async"></div>
  <div class="content"><b class="title">${title}</b><br><span class="muted tag">Seite</span></div>
</a>`;
  document.getElementById('snippet').textContent = snippet;
});
</script>
</body>
</html>
